package com.xtxk.recognition.prepare.service.common;

import cn.hutool.core.util.ArrayUtil;
import cn.hutool.core.util.HexUtil;

import java.util.Arrays;

public class FloatUtil {

    private static final int Float_BYTE_LENGTH = 4;

    private static final int FEATURE_LENGTH = 512;

    /**
     * float类型转byte数组
     *
     * @param f
     * @return
     */
    public static byte[] float2Bytes(float f) {
        int value = Float.floatToIntBits(f);

        byte[] byteRet = new byte[Float_BYTE_LENGTH];

        for (int i = 0; i < Float_BYTE_LENGTH; i++) {
            byteRet[i] = (byte) (value >> (24 - i * 8));
        }

        // 翻转数组
        int len = byteRet.length;
        // 建立一个与源数组元素类型相同的数组
        byte[] dest = new byte[len];
        // 为了防止修改源数组，将源数组拷贝一份副本
        System.arraycopy(byteRet, 0, dest, 0, len);
        byte temp;
        for (int i = 0; i < len / 2; ++i) {
            temp = dest[i];
            dest[i] = dest[len - i - 1];
            dest[len - i - 1] = temp;
        }
        return dest;
    }

    public static byte[] float2Bytes(double f) {
        long l = Double.doubleToLongBits(f);
        byte[] byteRet = new byte[Float_BYTE_LENGTH];

        for (int i = 0; i < Float_BYTE_LENGTH; i++) {
            byteRet[i] = (byte) (l >> (24 - i * 8));
        }

        // 翻转数组
        int len = byteRet.length;
        // 建立一个与源数组元素类型相同的数组
        byte[] dest = new byte[len];
        // 为了防止修改源数组，将源数组拷贝一份副本
        System.arraycopy(byteRet, 0, dest, 0, len);
        byte temp;
        for (int i = 0; i < len / 2; ++i) {
            temp = dest[i];
            dest[i] = dest[len - i - 1];
            dest[len - i - 1] = temp;
        }
        return dest;
    }

    /**
     * byte数组转换为float
     *
     * @param b
     * @return
     */
    public static float bytes2Float(byte[] b) {
        int l;
        l = b[0];
        l &= 0xff;
        l |= ((long) b[1] << 8);
        l &= 0xffff;
        l |= ((long) b[2] << 16);
        l &= 0xffffff;
        l |= ((long) b[3] << 24);
        return Float.intBitsToFloat(l);
    }

    /**
     * 将float数组转换为字节数组
     *
     * @param features feature的float数组
     * @return
     */
    public static byte[] floatArray2Bytes(float[] features) {
        byte[] featureBytes = new byte[Float_BYTE_LENGTH * features.length];
        for (int i = 0; i < features.length; i++) {
            byte[] byteArray = float2Bytes(features[i]);
            System.arraycopy(byteArray, 0, featureBytes, i * Float_BYTE_LENGTH, Float_BYTE_LENGTH);
        }
        return featureBytes;
    }

    public static byte[] floatArray2Bytes(double[] features) {
        byte[] featureBytes = new byte[Float_BYTE_LENGTH * features.length];
        for (int i = 0; i < features.length; i++) {
            byte[] byteArray = float2Bytes(features[i]);
            System.arraycopy(byteArray, 0, featureBytes, i * Float_BYTE_LENGTH, Float_BYTE_LENGTH);
        }
        return featureBytes;
    }

    public static double[] bytes2FloatArray(byte[] arr) {
        int floatLen = arr.length / Float_BYTE_LENGTH;
        double[] array = new double[floatLen];
        for (int i = 0; i < floatLen; i++) {
            byte[] sd = new byte[Float_BYTE_LENGTH];
            System.arraycopy(arr, i * Float_BYTE_LENGTH, sd, 0, Float_BYTE_LENGTH);
            array[i] = bytes2Float(sd);
        }
        return array;
    }

    /**
     * 将特征值转换为16进制字符串
     *
     * @param features 特征数组
     * @return
     */
    public static String feature2HexStr(float[] features) {
        byte[] bytes = floatArray2Bytes(features);
        return HexUtil.encodeHexStr(bytes);
    }

    public static String feature2HexStr(double[] features) {
        byte[] bytes = floatArray2Bytes(features);
        return HexUtil.encodeHexStr(bytes);
    }

    /**
     * 将16进制字符换反序列化为float的特征数组
     *
     * @param hexStr 16进制字符串
     * @return
     */
    public static double[] hexStr2Feature(String hexStr) {
        byte[] bytes = HexUtil.decodeHex(hexStr);
        return bytes2FloatArray(bytes);
    }

    /**
     * 求取两个数组的余弦相似度
     *
     * @param src    源数组
     * @param target 目标数组
     * @return
     */
    public static double getSimilarity(float[] src, float[] target) {
        if (src.length != target.length) {
            throw new RuntimeException("向量长度不匹配，无法计算 >> src:" + src.length + "target:" + target.length);
        }

        float ret = 0.0f;
        float mod1 = 0.0f;
        float mod2 = 0.0f;
        int length = src.length;
        for (int i = 0; i < length; ++i) {
            ret += src[i] * target[i];
            mod1 += src[i] * src[i];
            mod2 += target[i] * target[i];
        }
        double smi = ret / Math.sqrt(mod1) / Math.sqrt(mod2);
        return smi;
    }


    public static double getSimilarity2(double[] src, double[] target) {
        if (src.length != target.length) {
            throw new RuntimeException("向量长度不匹配，无法计算 >> src:" + src.length + "target:" + target.length);
        }

        double ret = 0.0d;
        double mod1 = 0.0d;
        double mod2 = 0.0d;
        int length = src.length;
        for (int i = 0; i < length; ++i) {
            ret += src[i] * target[i];
            mod1 += src[i] * src[i];
            mod2 += target[i] * target[i];
        }
        double smi = ret / Math.sqrt(mod1) / Math.sqrt(mod2);
        return smi;
    }

    /**
     * qiu数组模长
     *
     * @param data 一维数组
     * @return
     */
    private static double getMold(float[] data) {



        double result = 0;
        for (int i = 0; i < data.length; i++) {
            result += data[i] * data[i];
        }
        return Math.sqrt(result);
    }


    public static void main(String[] args) {
        double[] a = new double[]{-0.021118823438882828, 0.0470178946852684, -0.09406116604804993,
                -0.05085242912173271, 0.056221384555101395, 0.02739010564982891, 0.009037666022777557, 0.03350699320435524,
                -0.053576719015836716, -0.038428809493780136, -0.027773771435022354, 0.00587653461843729, -0.026835761964321136,
                -0.040114715695381165, -0.03749259561300278, -0.05886578559875488, 0.01117455493658781, 0.06658659875392914,
                0.07291244715452194, -0.02057499624788761, 0.06936869770288467, 0.019003920257091522, 0.020038969814777374,
                0.03119334578514099, -0.05168238282203674, 0.00757265742868185, 0.0378330834209919, 0.12194108217954636,
                -0.0195156317204237, -0.00480190385133028, -0.034195832908153534, -0.03460755571722984, 0.03702480345964432,
                0.07141329348087311, -0.0711229220032692, 0.06303547322750092, -0.042315151542425156, 0.07501430064439774,
                -0.014349520206451416, 0.09066929668188095, -0.07205433398485184, -0.01918591745197773, -0.047670088708400726,
                -0.03003259003162384, 0.055260077118873596, 0.08951997756958008, -0.13265854120254517, 0.0006441581645049155,
                0.03564984351396561, -0.041585590690374374, 0.03844236209988594, -0.008054601028561592, 0.06262394040822983,
                -0.07042928785085678, -0.017119718715548515, -0.04104677960276604, 0.02967681549489498, -0.05912444740533829,
                -0.009212558157742023, 0.007206719368696213, -0.024622630327939987, -0.0172809399664402, -0.010377088561654091,
                -0.02631303295493126, -0.026054976508021355, 0.004026663489639759, -0.014469380490481853, -0.0023016552440822124,
                -0.008206377737224102, -0.003942199982702732, 0.03526192530989647, 0.03259553760290146, -0.02925141714513302,
                0.020156972110271454, -0.0657338947057724, 0.022443655878305435, -0.07514435052871704, -0.026872901245951653,
                0.00826056394726038, 0.05230962485074997, 0.029724283143877983, 0.010692001320421696, -0.013656594790518284,
                0.014274396002292633, 0.06881754845380783, -0.0007452266290783882, -0.029174625873565674, -0.04274361580610275,
                -0.002571507589891553, -0.0324394628405571, 0.02002921886742115, 0.01408309768885374, 0.060712579637765884,
                -0.01882864162325859, -0.030962156131863594, 0.023809857666492462, -0.026051918044686317, -0.02022741548717022,
                0.1166902631521225, -0.1011350229382515, 0.03775246813893318, -0.006203589495271444, -0.06864333152770996,
                -0.008856416679918766, 0.0008137628901749849, 0.06192164868116379, -0.024765683338046074, 0.001737639307975769,
                0.03182080015540123, 0.05653855577111244, 0.004438837990164757, -0.03493082523345947, -0.04485576972365379,
                0.022115768864750862, -0.012831644155085087, -0.015223607420921326, 0.05955014005303383, 0.00489089684560895,
                -0.03248797729611397, 0.005356379318982363, 0.001675582374446094, -0.06265587359666824, -0.0009352774359285831,
                -0.04860644042491913, 0.027045907452702522, 0.013384467922151089, -0.039477843791246414, -0.0010258411057293415,
                -0.01142090279608965, -0.0207721758633852, -0.005922635551542044, 0.03555798530578613, 0.0344054214656353,
                -0.055043794214725494, 0.031372614204883575, -0.020348304882645607, 0.041775863617658615, -0.01525496132671833,
                -0.0414716899394989, -0.10017544031143188, 0.01932576671242714, -0.06925924867391586, 0.030775973573327065,
                -0.01686197891831398, -0.04643136262893677, -0.039949681609869, -0.009234683588147163, -0.010936792008578777,
                -0.004022528417408466, -0.05696087330579758, -0.02488766610622406, -0.06038738042116165, -0.01716887578368187,
                -0.0321611650288105, -0.018702277913689613, -0.08094418048858643, 0.021737340837717056, 0.025799432769417763,
                -0.06142004206776619, -0.04316030815243721, -0.07604434341192245, 0.04607970640063286, -0.0001294013491133228,
                0.02986876852810383, 0.020942389965057373, 0.049314651638269424, 0.01670200005173683, 0.002693240297958255,
                -0.06701043993234634, 0.08670565485954285, -0.053051967173814774, -0.028289373964071274, -0.029747705906629562,
                0.008839430287480354, -0.04009454324841499, 0.052874889224767685, -0.03228538855910301, -0.051870133727788925,
                0.004912469536066055, 0.035574398934841156, -0.03429245576262474, -0.06941968947649002, 0.002395089715719223,
                -0.025632023811340332, 0.019212517887353897, -0.00879630260169506, 0.007335806265473366, 0.03598668426275253,
                -0.011047997511923313, -0.0394853875041008, 0.0009031093213707209, -0.04131239280104637, 0.01527025643736124,
                -0.12034010887145996, -0.004898101557046175, 0.012088809162378311, 0.0958842858672142, 0.020914442837238312,
                0.10155458748340607, -0.045916683971881866, -0.0406019501388073, 0.05847854167222977, 0.04757632315158844,
                -0.03472904488444328, -0.030333491042256355, -0.00841428991407156, -0.036896318197250366, -0.06954395025968552,
                0.08596640825271606, 0.004714814480394125, 0.05441216006875038, 0.04880706965923309, 0.008950873278081417,
                0.03066342882812023, 0.016848385334014893, -0.01639540120959282, 0.016343198716640472, 0.0022639113012701273,
                -0.04562385380268097, -0.02690809592604637, -0.07165466994047165, 0.013831217773258686, 0.08242268115282059,
                0.030203338712453842, -0.021971093490719795, -0.04268064349889755, 0.08941107243299484, -0.0015322999097406864,
                0.03435315191745758, -0.02502918615937233, 0.0008302353089675307, 0.024957528337836266, -0.013469228520989418,
                0.08186517655849457, 0.04972454532980919, -0.005818761419504881, 0.07287127524614334, -0.01075565442442894,
                -0.014580725692212582, -0.03855595365166664, 0.05108931288123131, 0.021353866904973984, -0.025907430797815323,
                0.03612660989165306, -0.02219080924987793, -0.029147552326321602, -0.06528685986995697, -0.013679992407560349,
                0.04161839187145233, 0.09103572368621826, 0.011238637380301952, -0.04258935898542404, 0.02301318570971489,
                0.08426886051893234, 0.0073568448424339294, -0.0023786677047610283, 0.05990836024284363, -0.008193865418434143,
                0.014258950017392635, 0.03726315498352051, -0.03564174100756645, -0.05471322312951088, -0.023435626178979874,
                0.003761874744668603, 0.03341856598854065, 0.013697497546672821, 0.00670445105060935, 0.006121326237916946,
                -0.030773131176829338, 0.03774009272456169, 0.05034584924578667, -0.004157645627856255, -0.0033612435217946768,
                0.09913573414087296, -0.0005041724652983248, 0.007598255295306444, -0.0028462763875722885, 0.008528186939656734,
                -0.07025735825300217, 0.031177213415503502, 0.017911573871970177, 0.029889222234487534, 0.0164935402572155,
                0.006449869833886623, 0.016256486997008324, -0.04419886693358421, 0.05114477500319481, -0.0511295422911644,
                0.08262698352336884, 0.06154511496424675, -0.057310644537210464, 0.0014184222090989351, -0.021958664059638977,
                -0.05841720849275589, 0.009952476248145103, -0.024325579404830933, -0.027532853186130524, -0.015676112845540047,
                0.022781189531087875, -0.013995179906487465, -0.006528947968035936, 0.018947992473840714, 0.008407946676015854,
                -0.014376234263181686, 0.009261991828680038, -0.030365662649273872, 0.01813245564699173, 0.05868807062506676,
                0.002997985575348139, -0.03052847646176815, -0.022324640303850174, 0.03174379840493202, 0.042056113481521606,
                -0.010609019547700882, 0.011100542731583118, -0.017351185902953148, 0.0017644442850723863, 0.026805631816387177,
                -0.1092674508690834, 0.000491185171995312, 0.0319075733423233, -0.013555118814110756, -0.015800029039382935,
                0.025565458461642265, -0.04863438010215759, -0.05089322850108147, -0.02553345449268818, -0.012407069094479084,
                -0.018261846154928207, -0.00737414974719286, -0.04129364714026451, -0.01811882294714451, -0.025218890979886055,
                0.023380262777209282, -0.002614883240312338, 0.041271012276411057, 0.05411326512694359, -0.04500417411327362,
                -0.04145384579896927, 0.03641219064593315, -0.048835575580596924, 0.049979038536548615, 0.024590812623500824,
                0.008468175306916237, 0.07764144986867905, -0.014769559726119041, -0.07890783995389938, -0.011620688252151012,
                0.048220034688711166, 0.041130416095256805, 0.05801082402467728, -0.04605461657047272, -0.035632673650979996,
                -0.027549121528863907, -0.04565301910042763, -0.025978926569223404, 0.003889931831508875, -0.010822586715221405,
                -0.059356752783060074, -0.075009286403656, -0.014117328450083733, 0.0636725053191185, 0.044933389872312546,
                0.05948035046458244, -0.020732104778289795, 0.08321462571620941, 0.026033546775579453, -0.06323882192373276,
                -0.013891546055674553, -0.011980533599853516, -0.0056388345547020435, -0.0012532357359305024, 0.015679940581321716,
                0.008453489281237125, -0.06693141907453537, -0.0023989819455891848, 0.008151785470545292, -0.03794184699654579,
                0.024754434823989868, 0.023818621411919594, -0.06773989647626877, 0.062015898525714874, -0.05635463818907738,
                -0.00865621492266655, 0.06812123209238052, -0.08303718268871307, 0.032094307243824005, -0.04157118499279022,
                0.05711744725704193, 0.04630177468061447, -0.07912018150091171, -0.014709116891026497, -0.016242846846580505,
                0.012208660133183002, -0.005518170073628426, -0.0259307399392128, 0.07117916643619537, -0.0031226102728396654,
                0.031468313187360764, -0.03978143632411957, 0.037998348474502563, 0.041974376887083054, 0.04011654853820801,
                0.03102557174861431, -0.009194666519761086, -0.01604115031659603, 0.05262305960059166, -0.16673246026039124,
                0.015174790285527706, 0.10142028331756592, -0.06504248082637787, 0.01383984088897705, 0.010292253457009792,
                -0.026315536350011826, -0.0013838246231898665, 0.042795293033123016, -0.006667667999863625, 0.011259994469583035,
                0.014595952816307545, -0.04600284621119499, 0.03232448548078537, 0.02815067023038864, -0.03455023467540741,
                0.0025596830528229475, -0.04816589504480362, 0.09506315737962723, 0.0017646972555667162, -0.043974585831165314,
                0.05652586370706558, -0.037511374801397324, -0.0704837441444397, -0.029659582301974297, -0.05510766804218292,
                0.09811840206384659, 0.08287551999092102, 0.0022430659737437963, -0.027399186044931412, 0.03635894134640694,
                -0.021908793598413467, 0.02141353115439415, 0.025865137577056885, -0.010930915363132954, 0.033801835030317307,
                0.098099485039711, -0.0030369197484105825, 0.000907192297745496, -0.04659275710582733, 0.0221857987344265,
                0.008268254809081554, 0.027386588975787163, 0.006284582894295454, 0.02393820881843567, 0.019649915397167206,
                -0.03577076271176338, 0.03130454570055008, -0.021913019940257072, 0.04594026878476143, 0.07143048942089081,
                0.031218431890010834, -0.015010137110948563, -0.04599270597100258, 0.005487874615937471, -0.10229283571243286,
                -0.009401945397257805, -0.04018339514732361, -0.005596132017672062, 0.059238091111183167, -0.13054515421390533,
                0.022789763286709785, -0.020201068371534348, -0.018670374527573586, 0.05463196709752083, -0.06184619292616844,
                -0.034329380840063095, -0.05945715308189392, 0.0642034187912941, -0.04851950705051422, 0.05635293200612068,
                0.03890685737133026, -0.032820869237184525, -0.010787690058350563, 0.04388172924518585, -0.01010809000581503,
                0.05869867652654648, -0.011934876441955566, 0.03570052608847618, 0.01971219666302204, -0.006591671146452427,
                0.01393649447709322, -0.03166100010275841, -0.01790369674563408, -0.04479912668466568, -0.01177577581256628,
                0.01699778623878956, 0.0075630610808730125, 0.04667667672038078, -0.0263920109719038, 0.006892093922942877,
                -0.02812318317592144, 0.12221033871173859, -0.001356419874355197, -0.0036174547858536243, 0.023539988324046135,
                -0.03457453474402428, 0.018125910311937332, -0.04184942692518234, 0.027520472183823586, -0.03618865832686424,
                -0.06703672558069229, -0.17335358262062073, -0.0953279510140419, 0.06531069427728653};
        String join = ArrayUtil.join(a, "|");
        String[] split = join.split("\\|");
        double[] doubles = Arrays.stream(split).mapToDouble(Double::valueOf).toArray();

        double[] b = new double[]{
                0.012401034124195576, -0.02172594703733921,
                -0.08017691969871521, -0.05006411671638489, -0.014158337377011776, 0.004130438435822725, 0.03751635551452637,
                0.049505576491355896, 0.0038126250728964806, -0.060304608196020126, 0.041122980415821075, -0.00416960846632719,
                0.012719211168587208, -0.04602697491645813, -0.013873787596821785, -0.057528652250766754, 0.0026030961889773607,
                0.07086388021707535, 0.06007057800889015, -0.0251358300447464, 0.08181577175855637, 0.05549977719783783,
                0.01905769109725952, 0.01250424049794674, -0.002536762971431017, 0.012530692853033543, 0.05386509746313095,
                0.12606221437454224, -0.027104873210191727, -0.06351930648088455, -0.031563010066747665, -0.04365336149930954,
                -0.016541676595807076, 0.10868541896343231, -0.028254548087716103, 0.042624641209840775, -0.014746160246431828,
                0.08199338614940643, 0.014214270748198032, 0.09772244095802307, -0.05105271935462952, -0.04944806173443794,
                -0.09279724210500717, 0.01291345153003931, 0.05267570540308952, 0.08671021461486816, -0.124820776283741,
                0.022791298106312752, 0.01641499437391758, -0.019653460010886192, 0.03467899188399315, -0.001536736497655511,
                0.06635862588882446, -0.05171925947070122, 0.02125271037220955, -0.03784368559718132, 0.03163290023803711,
                -0.027416113764047623, 0.001237588468939066, 0.02853759191930294, -0.004295564256608486, -0.007268148940056562,
                -0.03849536180496216, -0.024812519550323486, -0.054451633244752884, 0.043017759919166565, -0.02374122478067875,
                0.015767743811011314, 0.03818586841225624, -0.011319543235003948, 0.044641073793172836, 0.012765178456902504,
                0.008476573042571545, 0.020448151975870132, -0.08234759420156479, 0.04316947981715202, -0.051460832357406616,
                0.02628900110721588, 0.04576531797647476, 0.0644928514957428, 0.012850013561546803, -0.005367425736039877,
                -0.006637833546847105, 0.040052976459264755, 0.0837806686758995, 0.007064558565616608, -0.04332098737359047,
                0.0013807674404233694, -0.002254584338515997, -0.04726653918623924, 0.05030837655067444, -0.054150693118572235,
                0.035467516630887985, -0.004195460584014654, -0.05309758707880974, 0.010109787806868553, 0.00753795774653554,
                -0.020559588447213173, 0.1136012151837349, -0.13127316534519196, -0.0035959717351943254, -0.014830267988145351,
                -0.06736335158348083, 0.025750722736120224, -0.0044788760133087635, 0.03643491864204407, 0.004240645561367273,
                0.0169039499014616, 0.04421570152044296, 0.10157129913568497, 0.010101249441504478, -0.03924950584769249,
                -0.0416143573820591, 0.04177725315093994, -0.0004353646363597363, -0.02078903466463089, 0.025884002447128296,
                -0.03621508926153183, -0.027943337336182594, 0.059808045625686646, 0.023459207266569138, -0.05321561172604561,
                -0.01737780123949051, -0.053990695625543594, -0.04377567023038864, 0.015357835218310356, -0.039191946387290955,
                0.018171321600675583, -0.017435677349567413, -0.01879444532096386, 0.01883828453719616, 0.0360257551074028,
                0.013546050526201725, -0.032184042036533356, 0.025181641802191734, -0.06664089858531952, 0.05439824238419533,
                -0.025416312739253044, -0.021466173231601715, -0.08482207357883453, 0.04378119111061096, -0.05520688369870186,
                0.03245964273810387, 0.06391263753175735, -0.04479648545384407, -0.025532547384500504, -0.025600580498576164,
                -0.015156143344938755, 0.0033430438488721848, -0.0105202691629529, 0.0040121241472661495, -0.015529337339103222,
                -0.02966998517513275, -0.03135380521416664, -0.009618674404919147, -0.018975738435983658, 0.0425567589700222,
                0.04566623643040657, -0.0440094880759716, -0.06700737029314041, -0.05140050873160362, 0.03142751380801201,
                -0.008537405170500278, 0.02275564707815647, 0.02184045873582363, 0.05553862825036049, 0.014065347611904144,
                -0.06850457936525345, -0.03789537027478218, 0.03361091762781143, -0.0958046242594719, -0.015654560178518295,
                -0.017259106040000916, -0.004389772657305002, -0.004561875481158495, 0.05041468143463135, -0.017743248492479324,
                -0.044051915407180786, 0.028246961534023285, 0.02961265668272972, -0.0296601764857769, -0.05803777277469635,
                0.017003856599330902, 0.0056445361115038395, 0.0039058986585587263, -0.0022323215380311012, -0.013526896946132183,
                -0.020618809387087822, 0.0030730734579265118, -0.024810628965497017, -0.003921170253306627, -0.036563847213983536,
                0.02740333043038845, -0.11651642620563507, -0.0033460999839007854, -0.033953431993722916, 0.06493254750967026,
                0.02479749172925949, 0.11547289043664932, -0.018649954348802567, -0.0437886007130146, 0.046276532113552094,
                0.03618813678622246, -0.04021343216300011, -0.03707378730177879, 0.012157941237092018, -0.024493254721164703,
                -0.06887184083461761, 0.058873165398836136, -0.019142497330904007, 0.022129971534013748, 0.031670037657022476,
                -0.01019458007067442, 0.004779274109750986, 0.020897988229990005, -0.018115632236003876, -0.02103142999112606,
                -0.01126039121299982, -0.03806407377123833, -3.205756365787238e-05, -0.06650694459676743, -0.01146016363054514,
                0.0741497352719307, -0.007862307131290436, -0.015517114661633968, -0.014069294556975365, 0.06917332857847214,
                0.012149263173341751, 0.02717217430472374, -0.018203364685177803, -0.019497044384479523, -0.002551794983446598,
                -0.016488051041960716, 0.059770554304122925, 0.034517981112003326, -0.027090732008218765, 0.04610009863972664,
                0.010213987901806831, 0.021026477217674255, -0.06463568657636642, 0.08602786064147949, 0.013975515961647034,
                -0.06044661998748779, 0.04470450431108475, -0.02682408131659031, -0.026901885867118835, -0.022883664816617966,
                -0.058584731072187424, 0.05153597146272659, 0.09818466752767563, 0.017363158985972404, -0.05939769744873047,
                0.0029923440888524055, 0.1300019770860672, 0.02482159622013569, -0.005867036525160074, 0.06431636214256287,
                0.04019813984632492, 0.03689141944050789, 0.022125789895653725, -0.02674185484647751, -0.024639025330543518,
                -0.036205995827913284, 0.05473580211400986, -0.02659277245402336, 0.017065543681383133, 0.06820062547922134,
                0.007940217852592468, -0.027095139026641846, 0.05323892831802368, 0.018232347443699837, -0.001191218150779605,
                0.059576403349637985, 0.06540560722351074, 0.03450508043169975, 0.003333632368594408, -0.010218522511422634,
                -0.007046844344586134, -0.03501192107796669, 0.025415226817131042, 0.011544673703610897, 0.015451143495738506,
                -0.043854665011167526, -0.006188926286995411, 0.030094634741544724, -0.0359562411904335, 0.06012360379099846,
                -0.07157925516366959, 0.019123803824186325, 0.03647463396191597, 0.026439426466822624, -0.01615232042968273,
                -0.01612781547009945, -0.01517479307949543, 0.02411538176238537, -0.046599775552749634, -0.03227125480771065,
                -0.029429426416754723, -0.02445400133728981, 0.021962083876132965, 0.004864505957812071, 0.03848101198673248,
                0.011872153729200363, 0.004583242814987898, 0.0030819319654256105, -0.05748608708381653, 0.020523175597190857,
                0.004029036033898592, 0.023719342425465584, -0.07293974608182907, -0.025883177295327187, 0.011493192054331303,
                0.013757919892668724, 0.035863760858774185, 0.048800647258758545, -0.030366525053977966, 0.023834634572267532,
                0.03875219076871872, -0.037695080041885376, 0.017865324392914772, 0.03456034138798714, -0.0032350311521440744,
                -0.007264591753482819, 0.031538840383291245, -0.0635892003774643, -0.005638435482978821, -0.06769002228975296,
                0.030972210690379143, 0.008456001058220863, -0.0315525159239769, -0.05518811196088791, -0.001587529550306499,
                -0.011480219662189484, 0.044510066509246826, 0.007436725310981274, 0.050305213779211044, -0.0026997574605047703,
                0.033005982637405396, -0.002975804265588522, 0.017738090828061104, -0.034438956528902054, 0.021367846056818962,
                0.011185795068740845, 0.0019023874774575233, 0.06363747268915176, 0.044888462871313095, -0.08775206655263901,
                0.021626703441143036, 0.018368128687143326, 0.02911391295492649, 0.06273782253265381, -0.0446292981505394,
                -0.04815051704645157, -0.0558115653693676, -0.10022181272506714, -0.0019587355200201273, -0.006162828300148249,
                0.002978370524942875, -0.034927286207675934, -0.05706735700368881, 0.0014050296740606427, 0.002102457918226719,
                0.020777393132448196, 0.056611400097608566, 0.022411933168768883, 0.06723054498434067, 0.0393684022128582,
                -0.08442391455173492, -0.018553102388978004, 0.0297279991209507, -0.0160122811794281, -0.01671093888580799,
                -0.039972253143787384, -0.009060435928404331, -0.01812772825360298, -0.017881635576486588, 0.012458565644919872,
                -0.06052686646580696, -0.002529263962060213, 0.048770591616630554, -0.07455502450466156, -0.01416521705687046,
                -0.07224225252866745, 0.0007099738577380776, 0.023565523326396942, -0.058524150401353836, 0.029001286253333092,
                -0.0511656180024147, 0.05248785763978958, 0.037949323654174805, -0.11230055242776871, -0.02274067886173725,
                -0.0184482391923666, 0.027484968304634094, -0.010092821903526783, -0.035585157573223114, 0.028693096712231636,
                -0.021447744220495224, 0.021914642304182053, -0.011183499358594418, 0.027570420876145363, 0.005995592568069696,
                0.02634766511619091, 0.08841856569051743, -0.01999600976705551, -0.01658899523317814, 0.030325280502438545,
                -0.17759469151496887, 0.010589120909571648, 0.11983902752399445, -0.07448325306177139, 0.013631672598421574,
                -0.030852319672703743, -0.008390814997255802, -0.0076799942180514336, -0.015171850100159645, 0.01093585416674614,
                0.031931694597005844, -0.03872215747833252, -0.0282895565032959, 0.11755108833312988, 0.04458941891789436,
                -0.019479937851428986, 0.04250289872288704, -0.005357638001441956, 0.02407635934650898, 0.009271101094782352,
                0.004467607010155916, 0.019110502675175667, -0.013738282956182957, -0.03929872065782547, 0.02860349975526333,
                -0.048871759325265884, 0.08876793831586838, 0.08467437326908112, 0.00420757569372654, -0.017492538318037987,
                0.0033466119784861803, -0.030156834051012993, -0.009965098462998867, -0.00398008618503809, 0.018369266763329506,
                0.025364242494106293, 0.07842215895652771, 0.0005939567345194519, -0.044764019548892975, -0.0487464964389801,
                -0.024633821099996567, 0.02374354749917984, 0.0375252440571785, 0.04707629978656769, -0.002308949828147888,
                0.009437360800802708, -0.0633428618311882, 0.022926468402147293, -0.006957349833101034, -0.004154014866799116,
                0.06919144839048386, 0.022930022329092026, 0.00216507981531322, -0.018970778211951256, 0.018623825162649155,
                -0.07989471405744553, -0.04143523424863815, -0.04809518903493881, 0.02889641374349594, 0.06321103125810623,
                -0.07606618851423264, 0.030620316043496132, 0.00439691636711359, -0.03484601154923439, 0.07909001410007477,
                -0.036138344556093216, -0.056952349841594696, -0.07236592471599579, 0.08566354215145111, -0.009353164583444595,
                0.07316785305738449, 0.03979306295514107, -0.021965689957141876, -0.047208357602357864, 0.07956697046756744,
                -0.0037784487940371037, 0.04763682559132576, -0.0110099408775568, 0.02764812670648098, 0.027755269780755043,
                0.002479072194546461, 0.06083344668149948, -0.014107421971857548, 0.0031096867751330137, -0.07619684934616089,
                0.02719748020172119, 0.018065322190523148, -0.00956785213202238, 0.030471058562397957, -0.037317682057619095,
                0.0011909515596926212, -0.04606448486447334, 0.14435507357120514, 0.014308351092040539, 0.0038998073432594538,
                0.017374373972415924, -0.02150086686015129, 0.015858495607972145, -0.09725803136825562, 0.05241847410798073,
                -0.040992144495248795, -0.06737221032381058, -0.10844232141971588, -0.10727200657129288, 0.07202156633138657
        };

        String hexStr = FloatUtil.feature2HexStr(b);
        System.out.println(hexStr);

        double similarity2 = FloatUtil.getSimilarity2(a, b);
       // System.out.println(similarity2);
    }
}
